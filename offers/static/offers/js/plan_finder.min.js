// Generated by CoffeeScript 1.6.3
(function(){var e;e=function(){function f(){}var e,t,n,r,i,s,o,u,a;return o=$("#orderingSelect"),s=[{selector:$("#countrySelect"),api:"locations__country"},{selector:$("#providerSelect"),api:"offer__provider__id"},{selector:$("#billingSelect"),api:"billing_time"},{selector:$("#datacenterSelect"),api:"locations__datacenter__id"},{selector:$("#serverTypeSelect"),api:"server_type"}],i=[{minField:$("#planMemMin"),maxField:$("#planMemMax"),api:"memory"},{minField:$("#planHDDMin"),maxField:$("#planHDDMax"),api:"disk_space"},{minField:$("#planBandMin"),maxField:$("#planBandMax"),api:"bandwidth"},{minField:$("#planIPv4Min"),maxField:$("#planIPv4Max"),api:"ipv4_space"},{minField:$("#planIPv6Min"),maxField:$("#planIPv6Max"),api:"ipv6_space"},{minField:$("#planCoreMin"),maxField:$("#planCoreMax"),api:"cpu_cores"},{minField:$("#planCostMin"),maxField:$("#planCostMax"),api:"cost"}],e=null,a=function(){var e,n,r,u,a,f;for(r=0,a=s.length;r<a;r++)n=s[r],n.selector.change(t);for(u=0,f=i.length;u<f;u++)e=i[u],e.minField.on("input",t),e.maxField.on("input",t);return o.on("change",t)},r=function(e,t){var n,r,i,s,o,a;o="",s="",i="",r="",a=Math.ceil(e.total_count/e.limit),n=Math.ceil(e.offset/e.limit)+1,e.previous===null?o="disabled":s=e.previous,e.next===null?i="disabled":r=e.next,t.append("<ul class='pagination'>\n  <li class='"+o+"'>\n    <a id='plan-finder-prev'>&laquo;</a>\n  </li>\n  <li><a>Page "+n+" of "+a+"</a></li>\n  <li class='"+i+"'>\n    <a id='plan-finder-next'>&raquo;</a>\n  </li>\n</ul>"),$("#plan-finder-prev").click(function(){return u(s)}),$("#plan-finder-next").click(function(){return u(r)})},u=function(e){if(e.length>0)return n(e)},n=function(t){var n;n=$("#plan_list"),n.html('<div class="ajax-loading"></div>'),e=$.get(t,function(e){var t,i,s,o;n.html("");if(e.meta.total_count===0){n.html("No plans with your filtering found!");return}o=e.objects;for(i=0,s=o.length;i<s;i++)t=o[i],n.append(t.html);r(e.meta,n)}).fail(function(){n.html("There were errors in your filtering. Please check that you did not enter letters or punctuation in the\nnumerically filtered fields.")})},t=function(){var t,r,u,a,f,l,c,h,p;a={limit:3,format:"json"};try{e.abort()}catch(d){t=d}for(l=0,h=s.length;l<h;l++)u=s[l],u.selector.val()!==null&&(a[u.api+"__in"]=u.selector.val().join(","));for(c=0,p=i.length;c<p;c++)r=i[c],r.minField.val().length>0&&(a[r.api+"__gte"]=r.minField.val()),r.maxField.val().length>0&&(a[r.api+"__lte"]=r.maxField.val());o.val()!=="ALL"&&(a.order_by=o.val()),f=$.param(a),n("/find/data/main/plan/?"+f)},$(document).ready(function(){a(),t()}),$("#filter-plans-btn").on("click",t),f}()}).call(this);