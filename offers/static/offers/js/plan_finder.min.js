function makePagination(e){var t="",n="",r="",i="",s=Math.ceil(e.total_count/e.limit),o=Math.ceil(e.offset/e.limit)+1;return e.previous==null?t="disabled":n=e.previous,e.next==null?r="disabled":i=e.next,'<ul class="pagination">            <li class="'+t+'">              <a onclick="paginationNavigate(\''+n+"')\">&laquo;</a>            </li>            <li><a>Page "+o+" of "+s+'</a></li>            <li class="'+r+'">              <a onclick="paginationNavigate(\''+i+"')\">&raquo;</a>            </li>        </ul>"}function paginationNavigate(e){e.length>0&&getAndRender(e)}function getAndRender(e){var t=$("#plan_list");t.html('<div class="ajax-loading"></div>'),currentRequest=$.get(e,function(e){t.html("");if(e.meta.total_count==0){t.html("No plans with your filtering found!");return}for(var n=0;n<e.objects.length;n++){var r=e.objects[n];t.append(r.html)}t.append(makePagination(e.meta))}).fail(function(){t.html("There were errors in your filtering. Please check that you did not enter letters or punctuation in the numerically filtered fields.")})}function filterPlans(){var e={limit:3,format:"json"};try{currentRequest.abort()}catch(t){}for(var n=0;n<multi_fields.length;n++){var r=multi_fields[n];r.selector.val()!=null&&(e[r.api+"__in"]=r.selector.val().join(","))}for(var i=0;i<min_max_fields.length;i++){var s=min_max_fields[i];s.minField.val().length>0&&(e[s.api+"__gte"]=s.minField.val()),s.maxField.val().length>0&&(e[s.api+"__lte"]=s.maxField.val())}ordering.val()!="ALL"&&(e.order_by=ordering.val());var o=$.param(e);getAndRender("/find/data/main/plan/?"+o)}var ordering=$("#orderingSelect"),multi_fields=[{selector:$("#countrySelect"),api:"location__country"},{selector:$("#providerSelect"),api:"offer__provider__id"},{selector:$("#billingSelect"),api:"billing_time"},{selector:$("#datacenterSelect"),api:"location__datacenter__id"},{selector:$("#serverTypeSelect"),api:"server_type"}],min_max_fields=[{minField:$("#planMemMin"),maxField:$("#planMemMax"),api:"memory"},{minField:$("#planHDDMin"),maxField:$("#planHDDMax"),api:"disk_space"},{minField:$("#planBandMin"),maxField:$("#planBandMax"),api:"bandwidth"},{minField:$("#planIPv4Min"),maxField:$("#planIPv4Max"),api:"ipv4_space"},{minField:$("#planIPv6Min"),maxField:$("#planIPv6Max"),api:"ipv6_space"},{minField:$("#planCoreMin"),maxField:$("#planCoreMax"),api:"cpu_cores"},{minField:$("#planCostMin"),maxField:$("#planCostMax"),api:"cost"}],currentRequest=null;(function(){for(var e=0;e<multi_fields.length;e++){var t=multi_fields[e];t.selector.change(filterPlans)}for(var n=0;n<min_max_fields.length;n++){var r=min_max_fields[n];r.minField.on("input",filterPlans),r.maxField.on("input",filterPlans)}})(),$(document).ready(filterPlans);