// Generated by CoffeeScript 1.6.3
(function(){var e,t,n,r,i,s,o,u,a;o=$("order fields"),s=[{selector:$("#countrySelect"),api:"location__country"},{selector:$("#providerSelect"),api:"offer__provider__id"},{selector:$("#billingSelect"),api:"billing_time"},{selector:$("#datacenterSelect"),api:"location__datacenter__id"},{selector:$("#serverTypeSelect"),api:"server_type"}],i=[{minField:$("#planMemMin"),maxField:$("#planMemMax"),api:"memory"},{minField:$("#planHDDMin"),maxField:$("#planHDDMax"),api:"disk_space"},{minField:$("#planBandMin"),maxField:$("#planBandMax"),api:"bandwidth"},{minField:$("#planIPv4Min"),maxField:$("#planIPv4Max"),api:"ipv4_space"},{minField:$("#planIPv6Min"),maxField:$("#planIPv6Max"),api:"ipv6_space"},{minField:$("#planCoreMin"),maxField:$("#planCoreMax"),api:"cpu_cores"},{minField:$("#planCostMin"),maxField:$("#planCostMax"),api:"cost"}],e=null,a=function(){var e,n,r,o,u,a,f;for(r=0,u=s.length;r<u;r++)n=s[r],n.selector.change(t);f=[];for(o=0,a=i.length;o<a;o++)e=i[o],e.minField.on("input",t),f.push(e.maxField.on("input",t));return f},a(),r=function(e){var t,n,r,i,s,o;return s="",i="",r="",n="",o=Math.ceil(e.total_count/e.limit),t=Math.ceil(e.offset/e.limit)+1,e.previous===null?s="disabled":i=e.previous,e.next===null?r="disabled":n=e.next,"<ul class='pagination'>\n  <li class='"+s+"'>\n    <a onclick='paginationNavigate(\""+i+"\")'>&laquo;</a>\n  </li>\n  <li><a>Page "+t+" of "+o+"</a></li>\n  <li class='"+r+"'>\n    <a onclick='paginationNavigate(\""+n+"\")'>&raquo;</a>\n  </li>\n</ul>"},u=function(e){if(e.length>0)return n(e)},n=function(t){var n;n=$("#plan_list"),n.html('<div class="ajax-loading"></div>'),e=$.get(t,function(e){var t,i,s,o;n.html("");if(e.meta.total_count===0){n.html("No plans with your filtering found!");return}o=e.objects;for(i=0,s=o.length;i<s;i++)t=o[i],n.append(t.html);n.append(r(e.meta))}).fail(function(){n.html("There were errors in your filtering. Please check that you did not enter letters or punctuation in the\nnumerically filtered fields.")})},t=function(){var t,r,u,a,f,l,c,h,p;a={limit:3,format:"json"};try{e.abort()}catch(d){t=d}for(l=0,h=s.length;l<h;l++)u=s[l],u.selector.val()!==null&&(a[u.api+"__in"]=u.selector.val().join(","));for(c=0,p=i.length;c<p;c++)r=i[c],r.minField.val().length>0&&(a[r.api+"__gte"]=r.minField.val()),r.maxField.val().length>0&&(a[r.api+"__lte"]=r.maxField.val());o.val()!=="ALL"&&(a.order_by=o.val()),f=$.param(a),n("/find/data/main/plan/?"+f)},$(document).ready(t)}).call(this);